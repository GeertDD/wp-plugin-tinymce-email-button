(function(){tinymce.create("tinymce.plugins.email",{init:function(b){b.addButton("email",{cmd:"email",title:tinymce_email_button.title,image:tinymce_email_button.url+"images/email-button.png"});b.addCommand("email",function(){var c=b.selection.getContent({format:"text"}),a=c.match(/\S+@\S+\.[a-z]+/i);if(a=prompt(tinymce_email_button.prompt,a?a[0]:""))""===c&&(c=a),b.execCommand("mceInsertContent",!1,'<a href="mailto:'+a+'">'+c+"</a>")});b.onNodeChange.add(function(b,a,d){a.setActive("email",!1);a.setDisabled("email", !1);"A"===d.nodeName&&((d.href||"").match(/^mailto:/i)?a.setActive("email",!0):a.setDisabled("email",!0))})}});tinymce.PluginManager.add("email",tinymce.plugins.email)})();